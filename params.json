{"name":"Cloudstack-release-verification-tool","tagline":"A python script used to more automatically verify Apache CloudStack release candidates.","body":"cloudstack-release-verification-tool\r\n====================================\r\n\r\nA python script used to more automatically verify Apache CloudStack release candidates.\r\n\r\nThis was created to make the more repititive aspects of verifying an Apache CloudStack release easier to complete, although it can be generalized by editing the instructions.conf file to suite your needs.\r\n\r\nHow to run: `./verify-release.py -i instructions.conf -c <commit-sh> -v <version>`\r\n\r\nAdding -d will output all stdout and stderr text after the commands are run, while excluding it will only cause output on a non-zero exit code from the command.\r\n\r\nHow to edit instructions.conf (or your own file):\r\n\r\nThe format of the file is expected to be a python list, containing dictionary objects that describe steps to be executed.  The parent object is a list specifically to ensure that the commands are executed in the order described.\r\n\r\nThe specific command step dictionary objects contain the following keys:\r\n\r\n* instructions - (excludes all other keys) A string appended to the post automation instruction set printed to the user\r\n* command - The string to execute within the shell\r\n* must_work - (Required if \"command\" key exists) True or False, signifying the reaction of the verification script to any non-zero exit status from the command (True will exit immediately, while False will allow processing to continue)\r\n* cwd - (Optional and only used if \"command\" key exists) The path to cd into prior to the command being run.  This is a critical field, given that each command is executed within it's own context (i.e.: you can't have a \"command\" to cd into a folder, and then expect to be in that folder for the next command)\r\n\r\nThere are also 2 replacement strings that can be used in the instructions.conf file:\r\n\r\n* ${commit-sh} - passed in via the -c command line option, meant to be the commit-sh being tested\r\n* ${version} - passed in via the -v command line option, meant to be the version of the software being tested\r\n\r\nThese two replacement strings are useful in describing a generic testing process, and passing in the specific commitsh and version to be tested against.\r\n\r\nExample:\r\n\r\n```\r\n[\r\n    {\r\n        \"command\":\"rm -Rf /tmp/cloudstack\", \r\n        \"must_work\":True\r\n    },\r\n    {\r\n        \"command\":\"rm -Rf ~/.m2\", \r\n        \"must_work\":True\r\n    },\r\n    {\r\n        \"command\":\"mkdir /tmp/cloudstack\", \r\n        \"must_work\":True\r\n    },\r\n    {\r\n        \"cwd\":\"/tmp/cloudstack\",\r\n        \"command\":\"wget --no-check-certificate -q https://dist.apache.org/repos/dist/release/cloudstack/KEYS\", \r\n        \"must_work\":True\r\n    },\r\n    {\r\n        \"instructions\":\"\"\"\r\nThis is a post instruction\r\nthat has two lines\"\"\"\r\n    }\r\n]\r\n```\r\n\r\nWhen the command is run, you will see output similar to the following:\r\n```\r\nRUNNING COMMAND: ls /tmp\r\nRUNNING COMMAND: exit 0\r\nRUNNING COMMAND: ls ~\r\nAUTOMATED TESTING RESULTS:\r\n[PASS]      ls /tmp\r\n[PASS]      exit 0\r\n[PASS]      ls ~\r\nPOST AUTOMATION STEPS:\r\n\r\nThis is a test instruction\r\n\r\nThis is a test\r\nmulti-line instruction.\r\n```\r\n\r\nAnd a failed run:\r\n```\r\nRUNNING COMMAND: ls /tmp\r\nRUNNING COMMAND: exit 1\r\nOUTPUT: \r\nAUTOMATED TESTING RESULTS:\r\n[PASS]      ls /tmp\r\n[FAILED]    exit 1\r\n[SKIPPED]   ls ~\r\nPOST AUTOMATION STEPS:\r\n```\r\n","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}